import{j as e}from"./jsx-runtime-ed146b25.js";import{c as b,i as j,m as S,n as q,u as _,e as p,o as f,P as $,d as O}from"./axios.api-b23b7fa1.js";import{B as g}from"./react-toastify.esm-fa44d8c4.js";import{e as L,r as V,g as B}from"./taskItemThunks-b75d5f6b.js";import{g as y}from"./taskColumnThunks-1145476d.js";import{T as P}from"./TaskDetailsModal-e5d6d895.js";import{T as F}from"./TaskEditor-a810f588.js";import{b as R}from"./Button-65c196bc.js";import{D as W,q as X}from"./DropdownMenu-134c1456.js";import{r as l}from"./index-c6dae603.js";import{S as z}from"./Select-93b2da57.js";import{F as G,A as J}from"./FolderOpenIcon-ec5f9f57.js";import{P as K}from"./PencilSquareIcon-3728169b.js";/* empty css              */import"./Input-73fe76b1.js";import"./index.esm-73804e6c.js";import"./priorityList-f9d72f84.js";import"./transition-349f38e8.js";function Q({title:t,titleId:o,...s},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":o},s),t?l.createElement("title",{id:o},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const U=l.forwardRef(Q),Y=U,ee=b("history/all",async(t,{dispatch:o})=>{try{const s=await j.get(`/activity-log/board/${t}`);s.status===200&&o(S(s.data))}catch(s){throw s}}),te=b("history/task-history",async(t,{dispatch:o})=>{try{const s=await j.get(`/activity-log/tasks/${t}`);s.status===200&&o(q(s.data))}catch(s){throw s}}),se=t=>{switch(t){case"Low":return"bg-blue-600";case"Medium":return"bg-yellow-400";case"High":return"bg-orange-600";case"Critical":return"bg-red-700";default:return"bg-gray-500"}},u=({taskId:t,title:o,description:s,priority:n,dueDate:h,columnId:T})=>{const{boardId:i}=R(),a=_(),M=p(r=>r.modal[`editTask_${t}`]),A=p(r=>r.modal[`taskDetails_${t}`]),C=p(r=>r.taskColumn.columnList).filter(r=>r.id!==T),D=async()=>{await a(V(+t)),g.warning("Task successfully deleted."),i&&a(y(+i))},H=async()=>{await a(B(+t)),a(f(`editTask_${t}`))},I=async r=>{const d=r.id,m={taskId:+t,column:d};await a(L(m)),i&&a(y(+i))},N=async()=>{i?(a(ee(+i)),await a(te(+t)),a(f(`taskDetails_${t}`))):g.error("Sorry, something went wrong.")},x=[{buttonId:1,icon:e.jsx(G,{className:"h-4 w-4","aria-hidden":"true"}),label:"Open",onClick:()=>N()},{buttonId:2,icon:e.jsx(K,{className:"h-4 w-4","aria-hidden":"true"}),label:"Edit",onClick:()=>H()},{buttonId:3,icon:e.jsx(J,{className:"h-4 w-4","aria-hidden":"true"}),label:"Remove",onClick:()=>D()}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full grid gap-2 rounded bg-white p-4 border-2 border-solid border-[#eeeeee]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h4",{className:"text-xl font-medium",children:o}),e.jsx(W,{children:e.jsx("div",{className:"flex flex-col items-start gap-2 px-3 py-2",children:x.map(({buttonId:r,icon:d,label:m,onClick:Z},E)=>e.jsx(X.Item,{children:e.jsxs("button",{type:"button",onClick:Z,className:`flex items-center gap-2 ${E===x.length-1?"text-red-600":""}`,children:[d,m]})},r))})})]}),e.jsx("p",{className:"text-xs font-normal whitespace-nowrap overflow-hidden text-ellipsis text-[#828282]",children:s}),e.jsxs("div",{className:"flex items-center justify-between gap-4 my-3",children:[e.jsx("p",{className:`w-fit text-sm font-medium leading-[0.875rem] text-[white] bg-blue-700 px-2 py-[0.3rem] ${se(n)}`,children:n}),e.jsxs("div",{className:"flex gap-1 text-[0.938rem] text-[#828282]",children:[e.jsx(Y,{className:"w-5 h-5"}),h]})]}),e.jsx(z,{list:C,placeholder:"Move to",onOptionSelect:I})]}),M&&e.jsx(F,{isEdit:!0,taskId:+t}),A&&e.jsx(P,{id:+t,title:o,description:s,priority:n,dueDate:h})]})};u.__docgenInfo={description:"",methods:[],displayName:"TaskItem",props:{taskId:{required:!0,tsType:{name:"number"},description:""},title:{required:!0,tsType:{name:"string"},description:""},description:{required:!0,tsType:{name:"string"},description:""},priority:{required:!0,tsType:{name:"string"},description:""},dueDate:{required:!0,tsType:{name:"string"},description:""},columnId:{required:!1,tsType:{name:"number"},description:""}}};const re=({children:t})=>e.jsx($,{store:O,children:t}),je={title:"Components/TaskItem",component:u,parameters:{layout:"centered"},tags:["autodocs"]},c={render:()=>e.jsx(re,{children:e.jsx(u,{taskId:1,title:"Create stories",description:"Add storybook to project",priority:"Medium",dueDate:"04.04.2024"})})};var v,w,k;c.parameters={...c.parameters,docs:{...(v=c.parameters)==null?void 0:v.docs,source:{originalSource:`{
  render: () => <MockedStore>\r
      <TaskItem taskId={1} title='Create stories' description='Add storybook to project' priority='Medium' dueDate='04.04.2024' />\r
    </MockedStore>
}`,...(k=(w=c.parameters)==null?void 0:w.docs)==null?void 0:k.source}}};const Te=["Default"];export{c as Default,Te as __namedExportsOrder,je as default};
